<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Changelog | Insta Snapshots</title>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    >
    <style>
  :root {
    /* Primary theme color */
    --primary-color: #86bbd8;
    /* Primary theme text color */
    --primary-text-color: #2f4858;
    /* Primary theme link color */
    --primary-link-color: #336699;
    /* Secondary color: the background body color */
    --secondary-color: #d0e3ee;
    --secondary-text-color: #303030;
    /* Light background */
    --light-color: #edf6fb;
    /* Highlight text color of table of content */
    --toc-highlight-text-color: #336699;
    --toc-highlight-background-color: var(--light-color);
  }
</style>

     <link rel="preconnect" href="https://fonts.gstatic.com">
    <link
      href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,600;1,400;1,600&display=swap"
      rel="stylesheet"> 
    <link
      href="https://fonts.googleapis.com/css?family=Fira+Sans:300,400,500,600&display=swap"
      rel="stylesheet">
    <link rel="stylesheet" href="https://insta.rs/juice.css">
    
      
      
    
    <meta property="title" content="Changelog">
    <meta property="og:title" content="Changelog">
    <meta property="og:site_name" content="Insta Snapshots">
    <meta property="og:image" content="https://insta.rs/logo.png" />
    <meta name="twitter:site" content="@mitsuhiko">
    <meta name="twitter:title" content="Changelog" />
    <meta name="description" content="Changelog
All notable changes to insta and cargo-insta are documented here.
1.29.0

Fixed a rednerin…">
    <meta name="og:description" content="Changelog
All notable changes to insta and cargo-insta are documented here.
1.29.0

Fixed a rednerin…">
    <meta name="twitter:description" content="Changelog
All notable changes to insta and cargo-insta are documented here.
1.29.0

Fixed a rednerin…">
    <meta name="twitter:card" content="summary">
    
  </head>

  <body>
    
<header>
   
<a href="https:&#x2F;&#x2F;insta.rs&#x2F;">
  <div class="logo">
    <img src="https://insta.rs/icon.png" alt="logo" />
    Insta
  </div>
</a>

<nav>
  
  <a class="nav-item subtitle-text" href="&#x2F;docs&#x2F;">Docs</a>
  
  <a class="nav-item subtitle-text" href="&#x2F;changelog&#x2F;">Changelog</a>
  
  <a class="nav-item subtitle-text" href="&#x2F;similar&#x2F;">Similar</a>
  
  <a class="nav-item subtitle-text" href="https:&#x2F;&#x2F;github.com&#x2F;mitsuhiko&#x2F;insta">GitHub</a>
  
  <a class="nav-item subtitle-text" href="https:&#x2F;&#x2F;crates.io&#x2F;crates&#x2F;insta">Crate</a>
  
</nav>

</header>


    <main>
      
        
          
        
        
          
        
        
          
        
        <label for="toc-toggle" class="toggle-toc"><span>Toggle Navigation</span></label>
        <input type="checkbox" id="toc-toggle">
        <div class="toc">
          <div class="toc-sticky">
            
            
            
              
              
                <div class="toc-item">
                  <a class="current" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#changelog">Changelog</a>
                </div>
                
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#1-29-0">1.29.0</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#1-28-0">1.28.0</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#1-27-0">1.27.0</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#1-26-0">1.26.0</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#1-25-0">1.25.0</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#1-24-1">1.24.1</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#1-24-0">1.24.0</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#1-23-0">1.23.0</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#1-22-0">1.22.0</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#1-21-2">1.21.2</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#1-21-1">1.21.1</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#1-21-0">1.21.0</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#1-20-0">1.20.0</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#1-19-1">1.19.1</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#1-19-0">1.19.0</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#1-18-2">1.18.2</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#1-18-1">1.18.1</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#1-18-0">1.18.0</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#1-17-2">1.17.2</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#1-17-1">1.17.1</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#1-17-0">1.17.0</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#1-16-0">1.16.0</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#1-15-0">1.15.0</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#1-14-1">1.14.1</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#1-14-0">1.14.0</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#1-13-0">1.13.0</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#1-12-0">1.12.0</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#1-11-0">1.11.0</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#1-10-0">1.10.0</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#1-9-0">1.9.0</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#1-8-0">1.8.0</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#1-7-2">1.7.2</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#1-7-1">1.7.1</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#1-7-0">1.7.0</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#1-6-3">1.6.3</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#1-6-2">1.6.2</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#1-6-1">1.6.1</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#1-6-0">1.6.0</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#1-5-3">1.5.3</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#1-5-2">1.5.2</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#1-5-1">1.5.1</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#1-5-0">1.5.0</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#1-4-0">1.4.0</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#1-3-0">1.3.0</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#1-2-0">1.2.0</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#1-1-0">1.1.0</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#1-0-0">1.0.0</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#0-16-1">0.16.1</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#0-16-0">0.16.0</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#0-15-0">0.15.0</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#0-14-0">0.14.0</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#0-13-1">0.13.1</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#0-13">0.13</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#0-12">0.12</a>
                  </div>
                  
                  
                  <div class="toc-item">
                    <a class="subtext" href="https:&#x2F;&#x2F;insta.rs&#x2F;changelog&#x2F;#0-11">0.11</a>
                  </div>
                  
                  
                
              
            
          </div>
        </div>
      

      <div class="content text">
        
<h1 id="changelog">Changelog</h1>
<p>All notable changes to insta and cargo-insta are documented here.</p>
<h2 id="1-29-0">1.29.0</h2>
<ul>
<li>Fixed a rednering bug with snapshot display (lines were not
rendered to the terminal width).</li>
<li>Added <code>--exclude</code> option to <code>cargo insta test</code>. (#360)</li>
<li>Inherit <code>color</code> option from a <code>CARGO_TERM_COLOR</code> environment variable (#361)</li>
</ul>
<h2 id="1-28-0">1.28.0</h2>
<ul>
<li>Added <code>allow_duplicates!</code> to enable multiple assertions for a
single snapshot. (#346)</li>
<li>Ensure that expressions formatted with <code>rustfmt</code> use unix newlines.</li>
<li>Added a way to disable diffing in review. (#348)</li>
<li>Added three argument version of <code>glob!</code> to set a different base
path. (#347)</li>
<li>Added <code>rounded_redaction</code> to truncate floating point values. (#350)</li>
</ul>
<h2 id="1-27-0">1.27.0</h2>
<ul>
<li>Fix an issue where the inline snapshot patcher could panic in
certain situations. (#341)</li>
<li><code>cargo insta test</code> now correctly detects CI environments like
<code>cargo test</code> does. In that case it will by fail rather than
create snapshot update files. (#345)</li>
<li>Added <code>cargo insta test --check</code> to force check runs. (#345)</li>
</ul>
<h2 id="1-26-0">1.26.0</h2>
<ul>
<li>Make canonicalization in <code>glob!</code> optional to better support WASI.</li>
</ul>
<h2 id="1-25-0">1.25.0</h2>
<ul>
<li>Added a way to disable the undiscoverable snapshots warning. By
setting the <code>review.warn_undiscovered</code> config key to <code>false</code> a
warning is never printed. (#334)</li>
<li>Force updating snapshots will now not overwrite files that did not
change. This improves the behavior for situations if that behavior
is preferred as a default choice. (#335)</li>
</ul>
<h2 id="1-24-1">1.24.1</h2>
<ul>
<li>Fix non working <code>--include-hidden</code> flag (#331)</li>
<li>Fix incorrect mapping of <code>review.include_ignored</code> (#330)</li>
</ul>
<h2 id="1-24-0">1.24.0</h2>
<ul>
<li>Added an insta tool config (<code>.config/insta.yaml</code>) to change the
behavior of insta and cargo-insta. (#322)</li>
<li>Renamed <code>--no-ignore</code> to <code>--include-ignored</code>.</li>
<li>Added <code>--include-hidden</code> to instruct insta to also walk into
hidden paths.</li>
<li>Added new <code>--unreferenced</code> option to <code>cargo-insta test</code> which allows
fine tuning of what should happen with unreferenced files. It's now
possible to ignore (default), warn, reject or delete unreferenced
snapshots. (#328)</li>
<li>Resolved an error message about doc tests when using nextest with
test targeting. (#317)</li>
</ul>
<h2 id="1-23-0">1.23.0</h2>
<ul>
<li>Add a hint if snapshots might be skipped. (#314)</li>
<li>Avoid extra newline in YAML snapshots. (#311)</li>
</ul>
<h2 id="1-22-0">1.22.0</h2>
<ul>
<li>Added support for rendering some invisibles in diffs. This now also
should make sure that ANSI sequences in strings are no longer screwing
up the terminal output. (#308)</li>
<li>Prevent inline snapshots to be used in loops. (#307)</li>
<li>Support the <code>--target</code> option to <code>cargo insta test</code>. (#309)</li>
<li>Globbing now adds directories as disambiguators into the snapshot
suffixes. This allows patterns such as <code>foo/*/*.txt</code> without
creating conflicts. (#310)</li>
</ul>
<h2 id="1-21-2">1.21.2</h2>
<ul>
<li>Added missing parameters to <code>cargo insta test</code>. (#305)</li>
<li>Fixed a sorting issue in hash maps for compound keys. (#304)</li>
</ul>
<h2 id="1-21-1">1.21.1</h2>
<ul>
<li>Fix incorrect handling of extra args to <code>cargo insta test</code>.</li>
</ul>
<h2 id="1-21-0">1.21.0</h2>
<ul>
<li>Fixed an issue that broke support for older rust versions. (#292)</li>
<li>Added <code>cargo insta show</code> command to render a snapshot.</li>
<li>Added support for compact JSON snapshots. (#288)</li>
</ul>
<h2 id="1-20-0">1.20.0</h2>
<ul>
<li><code>cargo insta</code> now supports nextest as test runner. (#285)</li>
<li>The <code>glob!</code> macro now defers failures by default. (#284)</li>
</ul>
<h2 id="1-19-1">1.19.1</h2>
<ul>
<li>Added support for numeric keys in JSON which regressed in 0.18.0. (#281)</li>
</ul>
<h2 id="1-19-0">1.19.0</h2>
<ul>
<li>Removed <code>backtrace</code> feature.</li>
<li>Removed <code>serialization</code> feature.</li>
<li><code>assert_json_snapshot!</code> and <code>assert_yaml_snapshot!</code> now require
the <code>json</code> and <code>yaml</code> feature respectively.</li>
<li>Doctests now emit a warning that inline snapshot updating is
not supported (#272)</li>
<li>Added support for <code>INSTA_GLOB_FILTER</code> to skip over tests expanded
from a glob. (#274)</li>
</ul>
<h2 id="1-18-2">1.18.2</h2>
<ul>
<li>Avoid the use of <code>#[allow(unused)]</code> in the macro. (#271)</li>
</ul>
<h2 id="1-18-1">1.18.1</h2>
<ul>
<li>Fixed a regression in the JSON serialization format with newtypes and
tuple variants. (#270)</li>
</ul>
<h2 id="1-18-0">1.18.0</h2>
<ul>
<li><code>Settings::bind</code> now can return a result.</li>
<li>Expose the drop guard type of <code>bind_to_scope</code>.</li>
<li>The <code>serde</code> dependency is now optional. While still enabled by default
users need to opt into <code>yaml</code> and <code>json</code> features explicitly to regain
support for it. To avoid the default <code>serde</code> dependency the default
features just need to be disabled. (#255)</li>
<li>Deprecated unused <code>serialization</code> features.</li>
<li>Deprecated unused <code>backtrace</code> feature.</li>
<li>Removed deprecated <code>Settings::bind_to_thread</code>.</li>
</ul>
<p><strong>Breaking Changes / Upgrading:</strong> If you are upgrading to serde 1.18.0 you will
receive deprecating warnings if you are using the <code>assert_yaml_snapshot!</code> and
<code>assert_json_snapshot!</code> macros. These macros will continue to function in the
future but they will require explicit opting into the <code>yaml</code> and <code>json</code> features.
To silence the warning add them to your <code>insta</code> dependency. Additionally the
<code>backtrace</code> feature was deprecated. It is no longer needed so just remove it.</p>
<h2 id="1-17-2">1.17.2</h2>
<ul>
<li>Remove an accidentaly debug print output.</li>
</ul>
<h2 id="1-17-1">1.17.1</h2>
<ul>
<li>Added support for nextest. (#242)</li>
<li>Resolved an issue where inline snapshot tests in doctests refused to
work. (#252)</li>
</ul>
<h2 id="1-17-0">1.17.0</h2>
<ul>
<li>Fixed an issue in <code>cargo-insta</code> where sometimes accepting inline snapshots
would crash with an out of bounds panic.</li>
<li>Added new <code>filters</code> feature. (#245)</li>
<li>Disallow unnamed snapshots in doctests. (#246)</li>
<li><code>with_settings!</code> macro now inherits the former settings rather than resetting. (#249)</li>
<li>Added support for <code>Settings::bind_to_scope</code> and deprecated
<code>Settings::bind_to_thread</code>. (#250)</li>
<li>Added support for <code>minimal-versions</code> builds.</li>
</ul>
<h2 id="1-16-0">1.16.0</h2>
<ul>
<li>Added <code>--no-quiet</code>/<code>-Q</code> flag to <code>cargo insta test</code> to suppress the
quiet flag. This works around limitations with custom test harnesses
such as cucumber.</li>
<li>Update RON to 0.7.1.</li>
<li>Improved ergonomics around <code>with_settings!</code>. It's now a perfect match to
the settings object's setter methods.</li>
<li>Added <code>description</code> and <code>info</code> to snapshots. (#239)</li>
<li>Added <code>omit_expression</code> setting. (#239)</li>
<li>Added improved support for running insta from doctests. (#243)</li>
</ul>
<h2 id="1-15-0">1.15.0</h2>
<ul>
<li>Bump minimum version of Rust to 1.56.1. This was done because the used
serde-yaml dependency no longer supports older versions of Rust.</li>
</ul>
<h2 id="1-14-1">1.14.1</h2>
<ul>
<li>Update uuid crate to 1.0.0. (#228)</li>
<li>Use inline block format also for strings of form <code>&quot;foo\n&quot;</code>. (#225)</li>
</ul>
<h2 id="1-14-0">1.14.0</h2>
<ul>
<li>Fixed a bug that caused insta to panic if inline snapshot assertions
moved since the time of the snapshot creation. (#220)</li>
<li><code>cargo insta test</code> now returns non zero status code when snapshots
are left for review. (#222)</li>
<li>Assertion failures now mention <code>cargo insta test</code>. (#223)</li>
</ul>
<h2 id="1-13-0">1.13.0</h2>
<ul>
<li>Fixed a bug where an extra newline was emitted following the snapshot header.</li>
<li><code>assertion_line</code> is no longer retained in snapshots. (#218)</li>
</ul>
<h2 id="1-12-0">1.12.0</h2>
<ul>
<li>Add support for sorting redactions (<code>sorted_redaction</code> and <code>Settings::sort_selector</code>). (#212)</li>
<li>Changed snapshot name detection to no longer use thread names but function names. (#213)</li>
</ul>
<p><strong>Upgrade Notes:</strong></p>
<p>Insta used to detect the current test name by using the current thread name. This
appeared to work well but unfortunately ran into various limitations. In particular
in some cases the thread name was truncated, missing or did not point to the current
test name. To better support different platforms and situations insta now uses the
function name instead.</p>
<p>This however changes behavior. In particular if you are using a helper function to
assert, a different snapshot name will now be used. You can work around this issue
by using a helper macro instead or to explicitly pass a snapshot name in such
situations.</p>
<h2 id="1-11-0">1.11.0</h2>
<ul>
<li>Trim down some unnecessary dependencies and switch to <code>once_cell</code>. (#208)</li>
</ul>
<h2 id="1-10-0">1.10.0</h2>
<ul>
<li>Update internal dependencies for console and ron.</li>
</ul>
<h2 id="1-9-0">1.9.0</h2>
<ul>
<li><code>cargo-insta</code> now correctly handles the package (<code>-p</code>) argument
on <code>test</code> when deleting unreferenced snapshots. (#201)</li>
</ul>
<h2 id="1-8-0">1.8.0</h2>
<ul>
<li>Added the ability to redact into a key. (#192)</li>
<li>Insta now memorizes assertion line numbers in snapshots. While these
will quickly be old, they are often useful when reviewing snapshots
immediately after creation with <code>cargo-insta</code>. (#191)</li>
</ul>
<h2 id="1-7-2">1.7.2</h2>
<ul>
<li>Fixed an issue where selectors could not start with underscore. (#189)</li>
<li>Allow passing arguments to <code>cargo test</code>. (#183)</li>
<li>Avoid the use of <code>Box::leak</code>. (#185)</li>
<li>When <code>INSTA_WORKSPACE_ROOT</code> is set, the value is used as the manifest
directory rather than whatever <code>CARGO_MANIFEST_DIR</code> was set to at compile
time. (#180)</li>
</ul>
<h2 id="1-7-1">1.7.1</h2>
<ul>
<li>Removed an accidental debug print. (#175)</li>
</ul>
<h2 id="1-7-0">1.7.0</h2>
<ul>
<li>Added support for u128/i128. (#169)</li>
<li>Normalize newlines to unix before before asserting. (#172)</li>
<li>Switch diffing to patience. (#173)</li>
</ul>
<h2 id="1-6-3">1.6.3</h2>
<ul>
<li>Fix a bug with empty lines in inline snapshots. (#166)</li>
</ul>
<h2 id="1-6-2">1.6.2</h2>
<ul>
<li>Lower Rust support to 1.41.0 (#165)</li>
</ul>
<h2 id="1-6-1">1.6.1</h2>
<ul>
<li>Bump similar dependency to reintroduce support for Rust 1.43.0 (#162)</li>
<li>Fixed custom extension support in cargo-insta (#163)</li>
</ul>
<h2 id="1-6-0">1.6.0</h2>
<ul>
<li>Change CSV serialization format to format multiple structs as
multiple rows. (#156)</li>
<li>Improvements to diff rendering.</li>
<li>Detect some snapshot name clashes. (#159)</li>
</ul>
<h2 id="1-5-3">1.5.3</h2>
<ul>
<li>Replace <a href="https://crates.io/crates/difference">difference</a> with
<a href="https://crates.io/crates/similar">similar</a>.</li>
</ul>
<h2 id="1-5-2">1.5.2</h2>
<ul>
<li>API documentation updates.</li>
</ul>
<h2 id="1-5-1">1.5.1</h2>
<ul>
<li>Fixed glob not working correctly.</li>
<li>Fail by default if glob is not returning any matches. Fixes #151.</li>
</ul>
<h2 id="1-5-0">1.5.0</h2>
<ul>
<li>Add <code>pending-snapshots</code> parameter to <code>cargo-insta</code>.</li>
<li><code>cargo-insta</code> now honors ignore files. This can be overridden
with <code>--no-ignore</code>.</li>
<li><code>cargo-insta</code> now supports the vscode extension.</li>
</ul>
<h2 id="1-4-0">1.4.0</h2>
<ul>
<li>Add <code>--delete-unreferenced-snapshots</code> parameter to <code>cargo-insta</code>.</li>
<li>Switch to the <code>globset</code> crate for the <code>glob</code> feature.</li>
<li>When <code>INSTA_UPDATE</code> is set to <code>always</code> or <code>unseen</code> it won't
fail on execution.</li>
<li>Changed informational outputs also show on pass.</li>
</ul>
<h2 id="1-3-0">1.3.0</h2>
<ul>
<li>Expose more useful methods from <code>Content</code>.</li>
<li>Fixes for latest rustc version.</li>
</ul>
<h2 id="1-2-0">1.2.0</h2>
<ul>
<li>Fix invalid offset calculation for inline snapshot (#137)</li>
<li>Added support for newtype variant redactions. (#139)</li>
</ul>
<h2 id="1-1-0">1.1.0</h2>
<ul>
<li>Added the <code>INSTA_SNAPSHOT_REFERENCES_FILE</code> environment variable to support
deletions of unreferenced snapshot files. (#136)</li>
<li>Added support for TOML serializations.</li>
<li>Avoid diff calculation on large input files. (#135)</li>
<li>Added <code>prepend_module_to_snapshot</code> flag to disable prepending of module
names to snapshot files. (#133)</li>
<li>Made <code>console</code> dependency optional. The <code>colors</code> feature can be disabled now
which disables colored output.</li>
</ul>
<h2 id="1-0-0">1.0.0</h2>
<ul>
<li>Globs now follow links (#132)</li>
<li>Added CSV Support (#134)</li>
<li>Changed globs to also include directories not just files.</li>
<li>Support snapshots outside source folder. (#70)</li>
<li>Update RON to 0.6.</li>
</ul>
<h2 id="0-16-1">0.16.1</h2>
<ul>
<li>Add <code>Settings::bind_async</code> when the <code>async</code> feature is enabled. (#121)</li>
<li>Bumped <code>console</code> dependency to 0.11. (#124)</li>
<li>Fixed incorrect path handling for <code>glob!</code>. (#123)</li>
<li>Remove <code>cargo-insta</code> from workspace and add <code>Cargo.lock</code>. (#116)</li>
</ul>
<h2 id="0-16-0">0.16.0</h2>
<ul>
<li>Made snapshot names optional for inline snapshots. (#106)</li>
<li>Remove legacy macros. (#115)</li>
<li>Made small improvements to cargo-insta's messaging and flags (#114)</li>
<li>Added new logo.</li>
<li>Added <code>glob</code> support. (#112)</li>
<li>Made <code>MetaData</code> fields internal. (#111)</li>
</ul>
<h2 id="0-15-0">0.15.0</h2>
<ul>
<li>Added test output control (<code>INSTA_OUTPUT</code> envvar). (#103)</li>
</ul>
<h2 id="0-14-0">0.14.0</h2>
<ul>
<li>Dependency bump for <code>console</code> (lowers total dependency count)</li>
<li>Change binary name to <code>cargo insta</code> in help pages.</li>
</ul>
<h2 id="0-13-1">0.13.1</h2>
<ul>
<li>Added support for <code>INSTA_UPDATE=unseen</code> to write out unseen snapshots without review (#96)</li>
<li>Added the <code>backtrace</code> feature which adds support for test name (and thus snapshot name)
recovery from the backtrace if rust-test is not used in concurrent mode (#94, #98)</li>
</ul>
<h2 id="0-13">0.13</h2>
<ul>
<li>Add support for deep wildcard matches (#92)</li>
<li>Use module paths for test names (#87)</li>
<li>Do not emit useless indentations for empty lines (#88)</li>
</ul>
<h2 id="0-12">0.12</h2>
<ul>
<li>Improve redactions support (#81)</li>
<li>Deprecated macros are now hidden</li>
<li>Reduce number of dependencies further.</li>
<li>Added support for newtype struct redactions.</li>
<li>Fixed bugs with recursive content operations (#80)</li>
</ul>
<h2 id="0-11">0.11</h2>
<ul>
<li>redactions are now an optional feature that must be turned on to be used (<code>redactions</code>).</li>
<li>RON format is now an optional feature that must be turned on to be used (<code>ron</code>).</li>
<li>added support for sorting maps before serialization.</li>
<li>added settings support.</li>
<li>added support for overriding the snapshot path.</li>
<li>correctly handle nested macros that might contain inline snapshots.</li>
<li>use thread name as snapshot name for inline snapshots.</li>
<li>use leading whitespace normalization for inline snapshots.</li>
<li>removed <code>creator</code> and <code>created</code> field from snapshot metadata.</li>
<li>removed the <code>_matches</code> suffix from all macros.</li>
<li>added an <code>--accept</code> option to <code>cargo insta test</code></li>
<li>added <code>--force-update-snapshots</code> option to <code>cargo insta test</code></li>
<li>added <code>--jobs</code> and <code>--release</code> argument to <code>cargo insta test</code>.</li>
</ul>
<p>To upgrade to the new insta macros and snapshot formats you can use
<a href="https://crates.io/crates/fastmod"><code>fastmod</code></a> and <code>cargo-insta</code> together:</p>
<pre style="background-color:#f5f5f5;color:#1f1f1f;"><code><span>$ cargo install fastmod
</span><span>$ cargo install cargo-insta
</span><span>$ fastmod &#39;\bassert_([a-z]+_snapshot)_matches!&#39; &#39;assert_${`}!&#39; -e rs --accept-all
</span><span>$ cargo insta test --all --force-update-snapshots --accept
</span></code></pre>





        
          
        

        
          <div class="source-hint">
            Found an issue?
            You can
            <a href="https://github.com/mitsuhiko&#x2F;insta-website/edit/main/content/changelog.md">edit this page</a>
            on GitHub.
          </div>
        
      </div>
    </main>

    
<footer>
  <span>
    Created by <a href="https://lucumr.pocoo.org/">Armin Ronacher</a>
  </span>
  <span><a href="https://github.com/mitsuhiko/insta">Github</a></span>
  <span><a href="https://github.com/mitsuhiko/insta/issues">Issues</a></span>
  <span><a href="https://docs.rs/insta">API Documentation</a></span>
  <span><a href="/similar/">Similar</a></span>
  <span><a href="https://crates.io/crates/io">Crate</a></span>
</footer>

    <script>
      function highlightNav(heading) {
        let pathname = location.pathname;
        document.querySelectorAll(".toc a").forEach((item) => {
          item.classList.remove("active");
        });
        document
          .querySelector(".toc a[href$='" + pathname + "#" + heading + "']")
          .classList.add("active");
      }

      let currentHeading = "";
      window.onscroll = function () {
        let h = document.querySelectorAll("h1,h2,h3,h4,h5,h6");
        let elementArr = [];

        h.forEach((item) => {
          if (item.id !== "") {
            elementArr[item.id] = item.getBoundingClientRect().top;
          }
        });
        elementArr.sort();
        for (let key in elementArr) {
          if (!elementArr.hasOwnProperty(key)) {
            continue;
          }
          if (elementArr[key] > 0 && elementArr[key] < 300) {
            if (currentHeading !== key) {
              highlightNav(key);
              currentHeading = key;
            }
            break;
          }
        }
      };
    </script>
  </body>
</html>
